## git流程

<p class='warning'>
 明确主开发分支 dev，合作开发分支以及个人开发分支
<p>

## 流程

### pull 与 push 操作

<!-- #### pull 与 push 操作 -->

1. 命令：git push origin dev 与 git pull origin dev。
2. push之前应该先pull，原因见 要求2。
3. 开发（BUG修复、优化）步骤：
	1. 从当前dev分支新建个人分支与合作开发分支
	2. 已个人开发分支为起点，进行开发
	3. 开发完成后，推送到合作开发分支上
	4. 经过不断的测试和调整，最终完成开发，此时所有的代码都在开发分支上
	5. 由功能负责人发起向dev的合并（即下面的操作）
	6. 删除个人开发分支与合作开发分支，并在本地dev分支上 pull 一下
4. 向dev分支推送操作步骤（由功能负责人操作）：
    1. 比较线下分支版本与线上分支版本（重点）
    2. 使用git reset [版本号] 回退到线上分支与个人开支的交叉点。该操作会保留所做修改，可放心
    3. git add .
    4. git stash 保存所做修改到stash中
    5. git pull origin dev，保证当前分支与开发分支同步
    6. git stash pop，将stash中的修改还原到开发分支中，这一步极有可能会有冲突，需要进行分析，处理（有可能需要他人帮助、协商）
    7. git add .
    8. git ci -m '' ，提交修改。
    9. git push origin [个人远程分支]，推送提交到远程的个人分支上。
    10. 发起合并请求

## 要求

1. 任何人的代码写完之后都要放入dev中（命令：git push origin []）
    1. 如果功能开发完成，则可以放入dev中。
    2. 如果功能开发未完成，但是不影响项目正常运行（项目的任何功能不受影响），可放入dev中。
    3. 如果功能开发未完成，且会影响项目的运行，则不可放入dev中。若此时需要进行其他的开发、修复BUG、优化等，需要将修改的代码放入stash中。继续开发时，再从stash中拿出来。
    4. 要永远保证dev是当前最新最全，可运行的代码。

2. 保持本地分支与远程主开发分支的同步 （命令：git pull origin dev）
    1. 任何人在开发或推送时，都应基于当前最新版本的dev。

3. 多次提交合并为一次提交。
    1. 若遵守流程操作，则可自动合并多次提交为一次提交。 

## 寻找分支交叉commit

<p class='tip'>
 暂时没有好的方法，gitlab 等工具都有分支的 Graph 视图。但是并不能 100% 找到两个分支的共有 commit，最好通过 commit 信息来辅助。
<p>

